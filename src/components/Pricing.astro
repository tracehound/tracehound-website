---
import { Check, X, Zap } from 'lucide-react'

// New pricing model: Per Service, Self-Service / Low-Friction
const tiers = [
  {
    name: 'Community',
    subtitle: 'Developer / POC',
    price: 'Free',
    period: '',
    features: [
      { text: 'Single instance (local state)', included: true },
      { text: 'Core protections (Rate Limit, Agent)', included: true },
      { text: 'In-memory state only', included: true },
      { text: 'Non-commercial or Revenue < $5k/mo', included: true },
      { text: 'Cold Storage', included: false },
      { text: 'Notification API', included: false },
      { text: 'Support', included: false },
    ],
    who: 'Developers, Hobbyists, POC',
    cta: 'npm install',
    ctaLink: 'https://github.com/laphilosophia/tracehound',
    highlight: false,
    borderColor: 'border-surface-highlight',
  },
  {
    name: 'Pro',
    subtitle: 'Growing SaaS',
    price: '$79',
    period: '/ month per service',
    features: [
      { text: 'Single instance', included: true },
      { text: 'Notification API (SIEM, SOC, webhooks)', included: true },
      { text: 'Async Codec (streaming compression)', included: true },
      { text: 'Evidence Export (S3, R2, GCS)', included: true },
      { text: 'Retention & Eviction Policies', included: true },
      { text: 'Email Support (24h SLA)', included: true },
      { text: 'Commercial License', included: true },
    ],
    who: 'Growing SaaS, Bootstrapped Startups',
    cta: 'Get Started',
    ctaLink: '#',
    highlight: true,
    borderColor: 'border-primary',
  },
  {
    name: 'Enterprise',
    subtitle: 'Cluster / High Scale',
    price: '$499+',
    period: '/ month',
    features: [
      { text: 'Multi-Instance (Redis coordination)', included: true },
      { text: 'Distributed state', included: true },
      { text: 'SIEM Integration (Splunk, Elastic, Datadog)', included: true },
      { text: 'Compliance Reports (SOC2, HIPAA)', included: true },
      { text: 'Priority Support / Slack', included: true },
      { text: 'SLA Guarantee', included: true },
      { text: 'Argos included', included: true },
    ],
    who: 'Scale-up, Fintech, High-Traffic E-commerce',
    cta: 'Contact Sales',
    ctaLink: '#',
    highlight: false,
    borderColor: 'border-surface-highlight',
  },
]
---

<section class="py-24" id="pricing">
  <div class="container-custom">
    <div class="text-center max-w-2xl mx-auto mb-16">
      <h2 class="text-3xl md:text-5xl font-bold mb-6 tracking-tight">
        Simple <span class="text-primary">per-service</span> pricing.
      </h2>
      <p class="text-text-muted text-lg">
        No request counting. No surprise bills. One price per logical service.
      </p>
    </div>

    <div class="grid lg:grid-cols-3 gap-8">
      {
        tiers.map((tier) => (
          <div
            class={`relative flex flex-col bg-surface/50 border ${tier.borderColor} ${tier.highlight ? 'border-primary ring-1 ring-primary/20' : ''} ${tier.highlight ? 'border-dashed' : 'border-dotted'} p-8 hover:bg-surface/80 transition-colors rounded-sm`}>
            {tier.highlight && (
              <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-primary text-background px-3 py-0.5 text-xs font-bold uppercase tracking-wider rounded-sm flex items-center gap-1">
                <Zap className="h-3 w-3" /> For Growing SaaS
              </div>
            )}

            <div class="mb-8">
              <h3 class="text-xl font-bold text-white mb-1 font-mono">{tier.name}</h3>
              <p class="text-sm text-text-muted mb-6 font-mono">{tier.subtitle}</p>
              <div class="flex items-baseline gap-1">
                <span class="text-4xl font-bold text-white tracking-tight">{tier.price}</span>
                {tier.period && (
                  <span class="text-sm text-text-muted font-mono">{tier.period}</span>
                )}
              </div>
            </div>

            <div class="space-y-4 flex-1">
              <ul class="space-y-3">
                {tier.features.map((feature) => (
                  <li
                    class={`text-sm flex items-start gap-3 ${feature.included ? 'text-text-muted' : 'text-text-muted/40'}`}>
                    {feature.included ? (
                      <Check className="h-4 w-4 text-primary shrink-0 mt-0.5" />
                    ) : (
                      <X className="h-4 w-4 text-text-muted/30 shrink-0 mt-0.5" />
                    )}
                    <span>{feature.text}</span>
                  </li>
                ))}
              </ul>

              <div class="pt-6 border-t border-white/5">
                <p class="text-xs text-text-muted">
                  Best for: <span class="text-white">{tier.who}</span>
                </p>
              </div>
            </div>

            <div class="mt-8 pt-4">
              <a
                href={tier.ctaLink}
                class={`block w-full py-3 px-4 text-center text-sm font-bold uppercase tracking-wider rounded-sm transition-all ${
                  tier.highlight
                    ? 'bg-primary text-background hover:bg-primary/90 shadow-[0_0_20px_rgba(242,201,76,0.2)]'
                    : 'bg-surface-highlight text-white hover:bg-surface-highlight/80 border border-white/5'
                }`}>
                {tier.cta}
              </a>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
