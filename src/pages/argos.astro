---
import { Activity, ArrowRight, Clock, Cpu, Shield } from 'lucide-react'
import NotifyForm from '../components/NotifyForm.astro'
import ProductPageLayout from '../layouts/ProductPageLayout.astro'
---

<ProductPageLayout
  title="Argos | Runtime Behavioral Observer"
  description="Know when your Node.js app starts misbehaving — before your users do. Event loop lag, memory anomalies, behavioral drift."
  product="argos"
  status="development"
  color="#a855f7"
>
  <!-- Hero Section -->
  <section class="relative py-24 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-purple-500/5 to-transparent"></div>
    <div class="container-custom relative">
      <div class="max-w-4xl mx-auto text-center">
        <!-- Status Badge -->
        <div
          class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-yellow-500/30 bg-yellow-500/10 text-yellow-400 text-sm font-medium mb-8"
        >
          <span class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse"></span>
          In Development
        </div>

        <!-- Main Headline -->
        <h1 class="text-4xl md:text-6xl font-bold tracking-tight mb-6">
          Meet <span class="text-purple-400">Argos</span>,<br />
          <span class="text-text-muted">the all-seeing observer.</span>
        </h1>

        <p class="text-xl text-text-muted max-w-2xl mx-auto mb-8 leading-relaxed">
          Know <em class="text-white font-medium not-italic">when</em> your Node.js app starts misbehaving
          — before your users do. Event loop starvation, memory anomalies, behavioral drift. Argos catches
          the symptoms.
        </p>

        <!-- CTA -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
          <NotifyForm product="Argos" color="#a855f7" placeholder="Get early access" />
        </div>
      </div>
    </div>
  </section>

  <!-- The Panoptes Metaphor -->
  <section class="py-16 border-y border-purple-500/10">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto text-center">
        <p class="text-lg text-text-muted italic">
          "In Greek mythology, <span class="text-purple-400 not-italic font-medium"
            >Argos Panoptes</span
          > was the all-seeing giant with a hundred eyes — never all closed at once. Our Argos watches
          your runtime with the same vigilance."
        </p>
      </div>
    </div>
  </section>

  <!-- 4-Layer Architecture -->
  <section class="py-24">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          Four Layers of <span class="text-purple-400">Protection</span>
        </h2>
        <p class="text-text-muted max-w-2xl mx-auto">
          Argos uses a multi-layer observation architecture to catch what single-threaded monitors
          miss.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-6 max-w-5xl mx-auto">
        <!-- Layer 1: Worker Thread Observer -->
        <div
          class="p-6 bg-surface/50 border border-purple-500/20 rounded-lg hover:border-purple-500/40 transition-all group"
        >
          <div class="flex items-start gap-4">
            <div
              class="w-12 h-12 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center text-purple-400 shrink-0"
            >
              <Cpu className="w-6 h-6" />
            </div>
            <div>
              <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-mono text-purple-400/60">LAYER 1</span>
              </div>
              <h3 class="text-lg font-semibold mb-2 group-hover:text-purple-400 transition-colors">
                Worker Thread Observer
              </h3>
              <p class="text-sm text-text-muted">
                Independent event loop that detects main thread starvation within <span
                  class="text-white font-medium">3 seconds</span
                >. Uses SharedArrayBuffer heartbeat — immune to event loop blocks.
              </p>
            </div>
          </div>
        </div>

        <!-- Layer 2: Adaptive Sampling -->
        <div
          class="p-6 bg-surface/50 border border-purple-500/20 rounded-lg hover:border-purple-500/40 transition-all group"
        >
          <div class="flex items-start gap-4">
            <div
              class="w-12 h-12 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center text-purple-400 shrink-0"
            >
              <Activity className="w-6 h-6" />
            </div>
            <div>
              <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-mono text-purple-400/60">LAYER 2</span>
              </div>
              <h3 class="text-lg font-semibold mb-2 group-hover:text-purple-400 transition-colors">
                Adaptive Sampling
              </h3>
              <p class="text-sm text-text-muted">
                Baseline mode: <span class="text-white">5s intervals</span> at &lt;0.1% CPU. Burst mode:
                <span class="text-white">100ms intervals</span> when anomaly detected. Auto-escalates
                and cools down.
              </p>
            </div>
          </div>
        </div>

        <!-- Layer 3: Ring Buffer -->
        <div
          class="p-6 bg-surface/50 border border-purple-500/20 rounded-lg hover:border-purple-500/40 transition-all group"
        >
          <div class="flex items-start gap-4">
            <div
              class="w-12 h-12 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center text-purple-400 shrink-0"
            >
              <Clock className="w-6 h-6" />
            </div>
            <div>
              <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-mono text-purple-400/60">LAYER 3</span>
              </div>
              <h3 class="text-lg font-semibold mb-2 group-hover:text-purple-400 transition-colors">
                Ring Buffer
              </h3>
              <p class="text-sm text-text-muted">
                Fixed-size circular buffer with <span class="text-white">1000 signals</span>. O(1)
                writes, retroactive analysis. See what happened <em>before</em> the incident.
              </p>
            </div>
          </div>
        </div>

        <!-- Layer 4: Native Watchdog -->
        <div
          class="p-6 bg-surface/50 border border-purple-500/20 rounded-lg hover:border-purple-500/40 transition-all group"
        >
          <div class="flex items-start gap-4">
            <div
              class="w-12 h-12 rounded-lg bg-purple-500/10 border border-purple-500/20 flex items-center justify-center text-purple-400 shrink-0"
            >
              <Shield className="w-6 h-6" />
            </div>
            <div>
              <div class="flex items-center gap-2 mb-2">
                <span class="text-xs font-mono text-purple-400/60">LAYER 4</span>
                <span class="text-xs px-2 py-0.5 rounded bg-surface-highlight text-text-muted"
                  >Optional</span
                >
              </div>
              <h3 class="text-lg font-semibold mb-2 group-hover:text-purple-400 transition-colors">
                Native Watchdog
              </h3>
              <p class="text-sm text-text-muted">
                libuv timer outside JS event loop. Emergency alerts for extreme timeouts (&gt;10s).
                Last line of defense.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Observation Axes -->
  <section class="py-24 bg-gradient-to-b from-transparent via-purple-500/5 to-transparent">
    <div class="container-custom">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          What Argos <span class="text-purple-400">Observes</span>
        </h2>
        <p class="text-text-muted max-w-2xl mx-auto">
          Five observation axes covering runtime health, event loop behavior, and integrity.
        </p>
      </div>

      <div class="grid sm:grid-cols-2 lg:grid-cols-5 gap-4 max-w-5xl mx-auto">
        {
          [
            { axis: 'runtime', label: 'Runtime', desc: 'Version, flags, intrinsics' },
            { axis: 'eventloop', label: 'Event Loop', desc: 'Latency, starvation, microtasks' },
            { axis: 'worker', label: 'Workers', desc: 'Thread pool behavior' },
            { axis: 'integrity', label: 'Integrity', desc: 'Frozen objects, prototype chain' },
            { axis: 'internal', label: 'Internal', desc: 'HTTP/RPC patterns' },
          ].map((item) => (
            <div class="p-4 bg-surface/30 border border-surface-highlight rounded-lg text-center hover:border-purple-500/30 transition-all">
              <div class="text-xs font-mono text-purple-400 mb-2">{item.axis}</div>
              <div class="font-semibold text-sm mb-1">{item.label}</div>
              <div class="text-xs text-text-muted">{item.desc}</div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Performance Stats -->
  <section class="py-24">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">
        <div class="grid md:grid-cols-3 gap-8 text-center">
          <div>
            <div class="text-4xl font-bold text-purple-400 mb-2">&lt;1%</div>
            <div class="text-text-muted">CPU Overhead (Baseline)</div>
          </div>
          <div>
            <div class="text-4xl font-bold text-purple-400 mb-2">3s</div>
            <div class="text-text-muted">Starvation Detection</div>
          </div>
          <div>
            <div class="text-4xl font-bold text-purple-400 mb-2">~85%</div>
            <div class="text-text-muted">Threat Coverage</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Code Example -->
  <section class="py-24 border-t border-purple-500/10">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-2xl font-bold mb-8 text-center">Quick Integration</h2>

        <div class="bg-surface rounded-lg border border-surface-highlight overflow-hidden">
          <div class="flex items-center gap-2 px-4 py-3 border-b border-surface-highlight">
            <div class="w-3 h-3 rounded-full bg-red-500/60"></div>
            <div class="w-3 h-3 rounded-full bg-yellow-500/60"></div>
            <div class="w-3 h-3 rounded-full bg-green-500/60"></div>
            <span class="ml-2 text-xs text-text-muted font-mono">app.ts</span>
          </div>
          <pre
            class="p-4 overflow-x-auto text-sm font-mono"><code class="text-text-muted"><span class="text-purple-400">import</span> {'{ createArgos }'} <span class="text-purple-400">from</span> <span class="text-green-400">'@argos/core'</span>

<span class="text-purple-400">const</span> argos = <span class="text-yellow-400">createArgos</span>({'{'}
  sink: {'{'} <span class="text-blue-400">emit</span>: (signal) {'=> console.log(signal)'} {'}'}
{'}'})

argos.<span class="text-yellow-400">start</span>()

<span class="text-text-muted/50">// Your app continues as normal</span>
<span class="text-text-muted/50">// Argos watches silently</span></code></pre>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="py-24 bg-gradient-to-t from-purple-500/10 to-transparent">
    <div class="container-custom">
      <div class="max-w-2xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-4">Be the first to try Argos</h2>
        <p class="text-text-muted mb-8">
          Currently in active development. Join the waitlist for early access.
        </p>
        <div class="flex justify-center">
          <NotifyForm product="Argos" color="#a855f7" />
        </div>

        <div class="mt-12 pt-8 border-t border-surface-highlight">
          <a
            href="/"
            class="inline-flex items-center gap-2 text-text-muted hover:text-white transition-colors"
          >
            <span>Back to Tracehound</span>
            <ArrowRight className="w-4 h-4" />
          </a>
        </div>
      </div>
    </div>
  </section>
</ProductPageLayout>
